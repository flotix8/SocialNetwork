<!DOCTYPE html>
<html>
<head>
	<title>Social Network Page</title>
	<link rel="stylesheet" type="text/css" href="profilCSS.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">

</head>
<body>
	<a href="#menu" id="toggle" title="Profil"><span><img id="profilPicture" height="43" width="43" src="https://yt3.ggpht.com/yti/AHXOFjVaO57NZn54rIPF3EiXicYHFBWo9njQoXChDGt6EQ=s88-c-k-c0x00ffffff-no-rj-mo"></span></a>

	<div id="menu">
	<ul>
		<li><a href="https://flotix8.github.io/SocialNetwork/page_de_inscription.html">Login</a></li>
		<li><a href="https://flotix8.github.io/SocialNetwork/account.html">Account</a></li>
		<li><a href="https://flotix8.github.io/SocialNetwork/setting.html">Setting</a></li>
		<li><a href="#contact">Contact</a></li>
	</ul>
	</div>

	<!-- Formulaire pour modifier la couleur -->
	<form id="color-form">
		<label for="color-input">Couleur de fond :</label>
		<input type="color" id="color-input" name="color-input">
		<button type="submit">Enregistrer</button>
	</form>
	
	<script>
		var theToggle = document.getElementById('toggle');

		// based on Todd Motto functions
		// https://toddmotto.com/labs/reusable-js/

		// hasClass
		function hasClass(elem, className) {
			return new RegExp(' ' + className + ' ').test(' ' + elem.className + ' ');
		}
		// addClass
		function addClass(elem, className) {
			if (!hasClass(elem, className)) {
				elem.className += ' ' + className;
			}
		}
		// removeClass
		function removeClass(elem, className) {
			var newClass = ' ' + elem.className.replace( /[\t\r\n]/g, ' ') + ' ';
			if (hasClass(elem, className)) {
				while (newClass.indexOf(' ' + className + ' ') >= 0 ) {
					newClass = newClass.replace(' ' + className + ' ', ' ');
				}
				elem.className = newClass.replace(/^\s+|\s+$/g, '');
			}
		}
		// toggleClass
		function toggleClass(elem, className) {
			var newClass = ' ' + elem.className.replace( /[\t\r\n]/g, " " ) + ' ';
			if (hasClass(elem, className)) {
				while (newClass.indexOf(" " + className + " ") >= 0 ) {
					newClass = newClass.replace( " " + className + " " , " " );
				}
				elem.className = newClass.replace(/^\s+|\s+$/g, '');
			} else {
				elem.className += ' ' + className;
			}
		}

		theToggle.onclick = function() {
			toggleClass(this, 'on');
			return false;
		}


		// const cookies = document.cookie.split(';');
		
		// var body = document.querySelector("body")
		// // Récupérer le nom d'utilisateur à partir du cookie
		// for (let i = 0; i < cookies.length; i++) {
        //     const cookie = cookies[i].trim();
		// 	if (cookie.startsWith('emailUtilisateur=')) {
		// 		var nomUtilisateur = cookie.split('=')[1]
		// 	}
		// }
		
		// Récupérer le formulaire de modification de la couleur
		const colorForm = document.querySelector("color-form");

		// Ajouter un événement de soumission au formulaire
		colorForm.addEventListener("submit", (event) => {
			event.preventDefault(); // Empêcher le formulaire de se soumettre

			// Récupérer la couleur saisie par l'utilisateur
			const colorInput = document.getElementById("color-input");
			const newColor = colorInput.value;

			// Enregistrer la couleur dans un cookie associé au nom d'utilisateur
			const nomUtilisateur = getCookieValue("emailUtilisateur");
			alert(nomUtilisateur)
			if (nomUtilisateur) {
				document.cookie = `couleurFond_${nomUtilisateur}=${newColor}; max-age=3600`;
			}

			// Mettre à jour la couleur de fond du body
			document.body.style.backgroundColor = newColor;
		});

		// Fonction pour récupérer la valeur d'un cookie
		function getCookieValue(cookieName) {
		const cookies = document.cookie.split("; ");
		for (const cookie of cookies) {
			const [name, value] = cookie.split("=");
			if (name === cookieName) {
			return value;
			}
		}
		return null;
		}

		// Récupérer la couleur du cookie associé au nom d'utilisateur et l'appliquer au body
		const couleurFond = getCookieValue(`couleurFond_${getCookieValue("nomUtilisateur")}`);
		if (couleurFond) {
		document.body.style.backgroundColor = couleurFond;
		}

	</script>
</body>
</html>
