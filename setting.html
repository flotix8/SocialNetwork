<!DOCTYPE html>
<html>
<head>
	<title>Mon réseau social - Connexion</title>
	<link rel="stylesheet" href="setting.css">
</head>
<body>
    <!-- Formulaire pour modifier la couleur -->
	<form id="color-form">
		<label for="color-input">Couleur de fond :</label>
		<input type="color" id="color-input" name="color-input">
		<button type="submit">Enregistrer</button>
	</form>
    <script>
        // ---------------------------Style---------------------------
		// Récupérer le formulaire de modification de la couleur
		const colorForm = document.getElementById("color-form");

        // Ajouter un événement de soumission au formulaire
        colorForm.addEventListener("submit", (event) => {
            event.preventDefault(); // Empêcher le formulaire de se soumettre

            // Récupérer la couleur saisie par l'utilisateur
            const colorInput = document.getElementById("color-input");
            const newColor = colorInput.value;

            // Enregistrer la couleur dans un cookie associé au nom d'utilisateur
            const nomUtilisateur = getCookieValue("emailUtilisateur");
            if (nomUtilisateur) {
                document.cookie = `couleurFond_${nomUtilisateur}=${newColor}; max-age=3600`;
            }

            // Mettre à jour la couleur de fond du body
            document.body.style.backgroundColor = newColor;
        });

        // Fonction pour récupérer la valeur d'un cookie
        function getCookieValue(cookieName) {
            const cookies = document.cookie.split("; ");
            for (const cookie of cookies) {
                const [name, value] = cookie.split("=");
                if (name === cookieName) {
                    return value;
                }
            }
            return null;
        }

        // Récupérer la couleur du cookie associé au nom d'utilisateur et l'appliquer au body
        const couleurFond = getCookieValue(`couleurFond_${getCookieValue("emailUtilisateur")}`);
        if (couleurFond) {
            document.body.style.backgroundColor = couleurFond;
        }
    </script>
</body>
</html>
